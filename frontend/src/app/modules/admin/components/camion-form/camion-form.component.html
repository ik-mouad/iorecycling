<div class="camion-form-container">
  <mat-card>
    <mat-card-header>
      <mat-card-title>
        {{ isEditMode ? ('camion.editTitle' | translate) : ('camion.newTitle' | translate) }}
      </mat-card-title>
    </mat-card-header>

    <mat-card-content>
      <form [formGroup]="camionForm" (ngSubmit)="onSubmit()">
        <div class="form-row">
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>{{ 'camion.matricule' | translate }} *</mat-label>
            <input matInput formControlName="matricule" placeholder="Ex: ABC-123-45">
            <mat-error>{{ getErrorMessage('matricule') }}</mat-error>
            <mat-hint>{{ 'camion.matriculeHint' | translate }}</mat-hint>
          </mat-form-field>
        </div>

        <div class="form-row">
          <mat-form-field appearance="outline">
            <mat-label>{{ 'camion.tonnageMaxKg' | translate }} *</mat-label>
            <input matInput type="number" formControlName="tonnageMaxKg" step="0.01" min="0.01">
            <mat-error>{{ getErrorMessage('tonnageMaxKg') }}</mat-error>
          </mat-form-field>

          <mat-form-field appearance="outline">
            <mat-label>{{ 'camion.typeCamion' | translate }} *</mat-label>
            <mat-select formControlName="typeCamion">
              <mat-option *ngFor="let type of typesCamion" [value]="type">
                {{ getTypeCamionLabel(type) }}
              </mat-option>
            </mat-select>
            <mat-error>{{ getErrorMessage('typeCamion') }}</mat-error>
          </mat-form-field>
        </div>

        <div class="form-row">
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>{{ 'camion.societeProprietaire' | translate }} *</mat-label>
            <mat-select formControlName="societeProprietaireId">
              <mat-option *ngFor="let societe of societesProprietaires" [value]="societe.id">
                {{ societe.raisonSociale }}
              </mat-option>
            </mat-select>
            <mat-error>{{ getErrorMessage('societeProprietaireId') }}</mat-error>
            <mat-hint>{{ 'camion.societeProprietaireHint' | translate }}</mat-hint>
          </mat-form-field>
          <button mat-icon-button color="primary" (click)="openCreateSocieteProprietaireDialog()" [matTooltip]="'camion.createSocieteProprietaire' | translate" type="button" class="add-societe-button">
            <mat-icon>add_circle</mat-icon>
          </button>
        </div>

        <div class="form-row">
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>{{ 'camion.observation' | translate }}</mat-label>
            <textarea matInput formControlName="observation" rows="3" 
                      [placeholder]="'camion.observationHint' | translate"></textarea>
            <mat-error>{{ getErrorMessage('observation') }}</mat-error>
          </mat-form-field>
        </div>

        <div class="form-row">
          <mat-slide-toggle formControlName="actif">
            {{ 'camion.actif' | translate }} ({{ 'camion.actifHint' | translate }})
          </mat-slide-toggle>
        </div>

        <div class="form-actions">
          <button mat-button type="button" (click)="cancel()" [disabled]="loading">
            {{ 'common.cancel' | translate }}
          </button>
          <button mat-raised-button color="primary" type="submit" [disabled]="loading || camionForm.invalid">
            <mat-spinner *ngIf="loading" diameter="20" style="display: inline-block; margin-right: 8px;"></mat-spinner>
            {{ isEditMode ? ('common.edit' | translate) : ('common.create' | translate) }}
          </button>
        </div>
      </form>
    </mat-card-content>
  </mat-card>
</div>

